#!/usr/bin/env bash
# workspace.sh - ORCHAT Workspace Awareness Module
# Phase 5.0 Step 1: Foundation before intelligence

source "$(dirname "$0")/workspace/detect_root.sh"
source "$(dirname "$0")/workspace/ignore.sh"
source "$(dirname "$0")/workspace/scan_files.sh"
source "$(dirname "$0")/workspace/summarize.sh"

workspace_status() {
    # Time the operation for performance tracking
    local start_time
    start_time=$(date +%s%N)
    
    local summary
    summary=$(summarize_workspace "$(pwd)")
    
    local end_time
    end_time=$(date +%s%N)
    local duration_ms=$(( (end_time - start_time) / 1000000 ))
    
    echo "$summary"
    echo ""
    echo "[DEBUG] Workspace analysis completed in ${duration_ms}ms"
}

# If called directly, run status
if [[ "${BASH_SOURCE[0]}" == "${0}" ]]; then
    workspace_status "$@"
fi
